---
title: "Tagfalter-Index 2025: Entwicklung der Artgruppen (Stand: 07.07.2025)"
output:
  powerpoint_presentation:
    reference_doc: ../Settings/template_BDM.pptx
---

```{r setup, include=FALSE}
# Libraries
library(tidyverse)
library(knitr)
library(readxl)
library(ggthemes)
library(metafor)
library(cowplot)
library(RColorBrewer)
library(openxlsx)

# Knitr settings 
options(scipen = 6);
opts_chunk$set(echo = FALSE, hide = TRUE, cache = FALSE, warning = FALSE, message = FALSE, 
               fig.width = 9, fig.height = 4)

# Darstellung von R-Berechnungen innerhalb von Text
inline_hook <- function(x) {
  if (is.numeric(x)) {
    x <- format(x, nsmall = 1, digits = 1)
  }
  x
}
knit_hooks$set(inline = inline_hook)

# Resultate einlesen und Daten auswählen die Dargestellt werden sollen
resultate <- read_csv("Results/resultate.csv", col_types = "ciddddddddic") %>% 
  filter(runID == "2025_bereinigt_v1") 
n_distinct(resultate$NUESP)

# Link zur BDM Datenbank
db <- DBI::dbConnect(RSQLite::SQLite(), "~/OneDrive - Hintermann + Weber AG/BDM_DB/DB_BDM_2025-06-02.db")

# Artangaben zusammenstellen (alle Arten mit Trendangaben)
species <- read_excel("Data/species.xlsx") %>% 
  filter(Berechnung_TFI == "ja") %>% 
  filter(!is.na(match(NUESP, unique(resultate$NUESP)))) %>% 
  transmute(NUESP, aID_SP, ESP, Meldetyp)

# Hilfsfunktion zur Erstellung der Artenlisten
getlist <- function(tt) {
  tmp <- character()
  for(i in 1:length(tt)) {
    if(i < length(tt)) tmp <- c(tmp, paste0(tt[i], ", ")) 
    if(i == length(tt)) tmp <- c(tmp, paste0(tt[i])) 
  }
  tmp
}

```

## Methoden
- Die berechneten Trends basieren auf dem Export der CSCF Daten vom 04.06.2025 und dem Export der BDM Daten vom 02.06.2025.
- Die Berechnungen basieren auf den Schätzungen von insgesamt `r n_distinct(resultate$NUESP)` Arten. Das sind `r 100 * n_distinct(resultate$NUESP) / 220`% der 220 Arten, welche in der Fauna Indicativa (inklusive Zygaenidae) ausgewiesen sind.
- Aus dem Besetzungsgrad aller Arten einer Artengruppe wird pro Jahr der Median berechnet.
- Der Indexwert wird mit dem Mittelwert der Jahre 2003-07 standardisiert.
- In den Grafiken ist zusätzlich der 95% Kompatibiliätsinterval dargestellt.

::: notes
Liste der Arten

`r species$ESP %>% sort %>% getlist`
:::

```{r plotsettings, eval = TRUE}

# Plot Einstellungen
theme_set(
  theme_clean() +
    theme(
      legend.title = element_blank(), 
      legend.position = "right", 
      legend.background = element_rect(colour = "white"),
      plot.background = element_blank())
)

getplot <- function(ausw, ylimup = 175, exportraw = FALSE, filenameexport = NA) {
  
  # Auswahl Daten
  d <- resultate %>% 
    filter(!is.na(match(NUESP, species$NUESP[ausw])))
  
  # Index berechnen
  index <- d %>% 
    group_by(year) %>% 
    dplyr::summarise(
      CI = median(mittel %>% plogis)
    ) 
  ref <- index$CI[!is.na(match(index$year, 2003:2007))] %>% mean
  index$CI <- 100 * index$CI / ref
  nsim <- 10
  sim <- array(dim = c(nrow(index), nsim))
  for(s in 1:nsim) {
    tt <- rnorm(n = nrow(d), d$mittel, d$sd) %>% plogis
    sim[, s] <- tapply(tt, d$year, median)
  }
  index$lo <- 100 * apply(sim, 1, quantile, probs = 0.025) / ref
  index$hi <- 100 * apply(sim, 1, quantile, probs = 0.975) /ref
  
  # Anzahl Arten mit Signif Trend berechnen
  trends <- d %>% 
    group_by(NUESP) %>% 
    dplyr::summarise(
      trend = coef(lm(mittel ~ year))[2],
      p = summary(lm(mittel ~ year))$coefficients[2, 4]
      # pmeta = rma(mittel, sd, mods = ~ year))$pval[2]
    )
  
  # Export raw data
  if(exportraw) {
    openxlsx::write.xlsx(round(index, 1), file = filenameexport)
  }
  
  # Make plot
  g <- index %>% 
    ggplot(aes(x = year, y = CI, ymin = lo, ymax = hi)) +
    geom_abline(slope = 0, intercept = 100, col = "grey", lty = 2) +
    geom_point(cex = 2) +
    geom_line() +
    geom_errorbar(width=.1, lwd = 0.3) +
    geom_smooth(method = lm) + 
    ylim(0, ylimup) +
    labs(x = "", y = "Index [(Mittelwert von 2003-2007 = 100)]") +
    scale_color_manual(values=c("black", "orange", "#56B4E9"))
  
  # Make Piechart
  pie <- tibble(
    group = factor(c("positiv", "positivNS",  "negativ", "negativNS"), levels = c("positiv", "positivNS", "negativNS", "negativ")),
    value = c(
      sum(trends$trend > 0 & trends$p <= 0.05),
      sum(trends$trend > 0 & trends$p > 0.05),
      sum(trends$trend < 0 & trends$p <= 0.05),
      sum(trends$trend < 0 & trends$p > 0.05)
    )
  ) %>%
    ggplot(aes(x="", y=value, fill=group)) +
    geom_bar(stat = "identity", width = 1) +
    coord_polar("y", start = 0, direction = -1) +
    scale_fill_manual(values = c(
      "positiv" = "#33A02C",
      "positivNS" = "#B2DF8A",
      "negativ" = "#E31A1C",
      "negativNS" = "#FB9A99")) +
    theme_minimal() +
    theme(
      legend.position = "none",
      panel.grid = element_blank(),
      axis.title = element_blank(),
      axis.text = element_blank(),
      axis.ticks = element_blank())
  ggdraw() +
    draw_plot(g) +
    draw_plot(pie, x = 0.75, y = 0.11, width = 0.3, height = 0.3)
}

```

## Gesamttrend aller Arten
```{r}
getplot(rep(TRUE, nrow(species)))
```

## Kältezeiger
```{r}

# Wärmetyp hinzufügen
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Ergaenzung_FI_2023, Waermetyp), copy = TRUE)

# Auswahl der Arten
sel <- !is.na(species$Waermetyp) & species$Waermetyp <= 2 
artenliste <- species$ESP[sel] %>% sort %>% getlist
```
- Ausgewählt wurden alle Arten mit Wärmetyp 1 oder 2 gemäss Fauna-Indicativa.
- In der Fauna Indicativa (inklusive Zygaenidae) erfüllen 49 Arten dieses Kriterium.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 49`%) vor.

::: notes
`r artenliste`
:::

## Kältezeiger
```{r}
getplot(
  sel,ylimup = 220,
  exportraw = TRUE, 
  filenameexport = "1900_Tagfalterindex_Kaeltezeiger_v1.xlsx")
```


## Wärmezeiger
```{r}
sel <- !is.na(species$Waermetyp) & species$Waermetyp >= 4 
artenliste <- species$ESP[sel] %>% sort %>% getlist
```
- Ausgewählt wurden alle Arten mit Wärmetyp 4 oder 5 gemäss Fauna-Indicativa inklusive Zygaenidae.
- In der Fauna Indicativa (inklusive Zygaenidae) erfüllen 105 Arten dieses Kriterium.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 105`%) vor.

::: notes
`r artenliste`
:::

## Wärmezeiger
```{r}
getplot(
  sel,
  exportraw = TRUE, 
  filenameexport = "1900_Tagfalterindex_Waermezeiger_v1.xlsx")
```

## EU Grassland-Indikator
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, EU_Grassland_Indicator), copy = TRUE)
sel <- !is.na(species$EU_Grassland_Indicator) & species$EU_Grassland_Indicator == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Bestandteil des Europäischen Grassland-Indikators sind die Arttrends von 17 Arten.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## EU Grassland-Indikator
```{r}
getplot(sel, ylimup = 200, exportraw = T, filenameexport = "1900_grassland_indicator_CH.xlsx")
```

## UZL-Arten
```{r}
species <- species %>% 
  left_join(tbl(db, "Arten") %>% transmute(aID_SP, UZL), copy = TRUE)
sel <- !is.na(species$UZL) & species$UZL == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Ausgewählt wurden alle aktuellen Ziel- und Leitarten der Umweltziele Landwirtschaft (UZL).
- Insgesamt gibt es 109 UZL-Arten. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 109`%) vor.

::: notes
`r artenliste`
:::

## UZL-Arten
```{r}
getplot(sel)
```

## Waldarten
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Wald), copy = TRUE)
sel <- !is.na(species$Wald) & species$Wald == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Lebensraumeinteilung nach Birrer und Plattner.
- Insgesamt gibt es gemäss dieser Einteilung 54 Waldarten-Arten. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 54`%) vor.

::: notes
`r artenliste`
:::

## Waldarten
```{r}
getplot(sel)
```

## Arten nährstoffreicher Lebensräume
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Nutrient), copy = TRUE)
sel <- !is.na(species$Nutrient) & species$Nutrient >= 5
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Zur Einteilung wurde der Indikatorwert "nutrient" verwendet, der angibt, ob die Arten in nährstoffreichen oder nährstoffarmen Lebensräumen vorkommen. Je grösser der Wert, desto nährstoffreicher der Lebensraum.
- Die Arten wurden von Stefan Birrer, Matthias Plattner und Yannick Chittaro eingestuft. Auslöser war die Umfrage bei den Europäischen Tagfalter-Experten von Chris van Swaay für die Erstellung von Zeigerwerten für Stickstoff und Feuchtigkeit.
- Als Kennarten für nährstoffreiche Lebensräume wurden alle Arten mit einem Indikatorwert von mindestens 5 verwendet.
- Insgesamt gibt es gemäss dieser Einteilung 62 Arten nährstoffreicher Lebensräume. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 62`%) vor.

::: notes
`r artenliste`
:::

## Arten nährstoffreicher Lebensräume
```{r}
getplot(sel)
```

## Arten nährstoffarmer Lebensräume
```{r}
sel <- !is.na(species$Nutrient) & species$Nutrient <= 3
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Zur Einteilung wurde der Indikatorwert "nutrient" verwendet, der angibt, ob die Arten in nährstoffreichen oder nährstoffarmen Lebensräumen vorkommen. Je grösser der Wert, desto nährstoffreicher der Lebensraum.
- Die Arten wurden von Stefan Birrer, Matthias Plattner und Yannick Chittaro eingestuft. Auslöser war die Umfrage bei den Europäischen Tagfalter-Experten von Chris van Swaay für die Erstellung von Zeigerwerten für Stickstoff und Feuchtigkeit.
- Als Kennarten für nährstoffarme Lebensräume wurden alle Arten mit einem Indikatorwert von höchstens 3 verwendet.
- Insgesamt gibt es gemäss dieser Einteilung 74 Arten nährstoffarmer Lebensräume. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 74`%) vor.

::: notes
`r artenliste`
:::

## Arten nährstoffarmer Lebensräume
```{r}
getplot(sel)
```

## Standortstreu Arten
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, standortstreu), copy = TRUE)
sel <- !is.na(species$standortstreu) & species$standortstreu == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Arten die (sehr) standortstreuen Arten gemäss Fauna Indicativa.
- Insgesamt gibt es gemäss dieser Einteilung 175 Arten nährstoffreicher Lebensräume. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 175`%) vor.

::: notes
`r artenliste`
:::

## Standortstreu Arten
```{r}
getplot(sel)
```

## Vagabundierende Arten
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, vagabundierend), copy = TRUE)
sel <- !is.na(species$vagabundierend) & species$vagabundierend == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Arten die vagabundierenden Arten gemäss Fauna Indicativa.
- Insgesamt gibt es gemäss dieser Einteilung 33 vagabundierende Arten. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 33`%) vor.

::: notes
`r artenliste`
:::

## Vagabundierende Arten
```{r}
getplot(sel)
```

## Arten mit einer Generation pro Jahr
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Voltinismus), copy = TRUE)
sel <- !is.na(species$Voltinismus) & species$Voltinismus < 1.1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Arten die vagabundierenden Arten gemäss Fauna Indicativa.
- Insgesamt gibt es gemäss dieser Einteilung 151 Arten mit einer Generation. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 151`%) vor.

::: notes
`r artenliste`
:::

## Arten mit einer Generation pro Jahr
```{r}
getplot(sel)
```

## Arten mit mehreren Generationen pro Jahr
```{r}
sel <- !is.na(species$Voltinismus) & species$Voltinismus > 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Arten die vagabundierenden Arten gemäss Fauna Indicativa.
- Insgesamt gibt es gemäss dieser Einteilung 46 Arten mit mehreren Generationen. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten (`r 100 * sum(sel) / 46`%) vor.

::: notes
`r artenliste`
:::

## Arten mit mehreren Generationen pro Jahr
```{r}
getplot(sel)
```


## Trend häufige Arten
```{r}
# Anzahl Flächen mit Nachweisen in der BDM-Ersterhebung berechnen
species <- species %>% 
  left_join(
    tbl(db, "TF") %>% 
  filter(!is.na(aID_SP)) %>% 
  left_join(tbl(db, "KD_Z7")) %>% 
  filter(!is.na(yearBu) & yearP >= 2003, yearP <= 2007) %>% 
  left_join(tbl(db, "Raumdaten_Z7")) %>% 
  filter(Stichprobe_BDM_CH == "ja" & Verdichtung_BDM == "nein" & Verdichtung_BDM_Siedlung == "nein" & Verdichtung_BDM_Gebirge == "nein") %>%
  group_by(aID_SP) %>% 
  dplyr::summarise(
    nBDM = n()) %>% 
    as_tibble()
  ) %>% 
  replace_na(list(nBDM = 0))
sel <- species$nBDM > quantile(species$nBDM, probs = 0.66)
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Für ca. einen Viertel der Arten können wir keinen Trend berechnen, weil sie zu selten sind. 
- Die Arten, für welche wir einen Trend berechnen konnten, teilen wir entsprechend ihrer Häufigkeit in drei gleich grosse Gruppen: "Häufige Arten", "Mittelhäufige Arten" und "Mittelseltene Arten".
- Die Häufigkeit berechnen wir gemäss BDM-Ersterhebung (2003-2007).
- Zu den "Häufigen Arten" zählen wir `r sum(sel)` Arten.

::: notes
`r artenliste`
:::

## Trend häufige Arten
```{r}
getplot(sel)
```


# Weitere Artengruppen (nur für internen Gebrauch)

## Trend mittelhäufige Arten
```{r}
sel <- species$nBDM > quantile(species$nBDM, probs = 0.33) & species$nBDM < quantile(species$nBDM, probs = 0.66)
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Für ca. einen Viertel der Arten können wir keinen Trend berechnen, weil sie zu selten sind. 
- Die Arten, für welche wir einen Trend berechnen konnten, teilen wir entsprechend ihrer Häufigkeit in drei gleich grosse Gruppen: "Häufige Arten", "Mittelhäufige Arten" und "Mittelseltene Arten".
- Die Häufigkeit berechnen wir gemäss BDM-Ersterhebung (2003-2007).
- Zu den "Mittelhäufigen Arten" zählen wir `r sum(sel)` Arten.

::: notes
`r artenliste`
:::

## Trend mittelhäufige Arten
```{r}
getplot(sel)
```

## Trend mittelseltene Arten
```{r}
sel <- species$nBDM <= quantile(species$nBDM, probs = 0.33)
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Für ca. einen Viertel der Arten können wir keinen Trend berechnen, weil sie zu selten sind. 
- Die Arten, für welche wir einen Trend berechnen konnten, teilen wir entsprechend ihrer Häufigkeit in drei gleich grosse Gruppen: "Häufige Arten", "Mittelhäufige Arten" und "Mittelseltene Arten".
- Die Häufigkeit berechnen wir gemäss BDM-Ersterhebung (2003-2007).
- Zu den "Mittelseltenen Arten" zählen wir `r sum(sel)` Arten.

::: notes
`r artenliste`
:::

## Trend mittelseltene Arten
```{r}
getplot(sel)
```

## RL-Arten
```{r}
species <- species %>% 
  left_join(tbl(db, "Arten") %>% transmute(aID_SP, RL), copy = TRUE)
sel <- !is.na(species$RL) & (!is.na(match(species$RL, c("RE", "EN", "VU"))))
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Ausgewählt wurden alle Arten der RL-Liste gemäss aktueller Roter Liste (ohne NT-Arten).
- Insgesamt stehen 78 Arten auf der Roten Liste (RE: 3 Arten, CR: 10 Arten, EN: 27 Arten, VU: 38 Arten).
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor ((RE: `r sum(species$RL == "RE")` Arten, CR: `r sum(species$RL == "CR")` Arten, EN: `r sum(species$RL == "EN")` Arten, VU: `r sum(species$RL == "VU")` Arten)).

::: notes
`r artenliste`
:::

## RL-Arten
```{r}
getplot(sel)
```

## Nationale Priorität
```{r}
species <- species %>% 
  left_join(tbl(db, "Arten") %>% transmute(aID_SP, prio), copy = TRUE)
sel <- !is.na(species$prio)
sel1 <- is.na(species$prio)
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Ausgewählt wurden alle Arten gemäss Liste der prioritären Arten der Schweiz. Diese Gruppe wurde der Gruppe der nicht prioritären Arten gegenüber gestellt. 
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` prioritäre und für `r sum(sel1)` nicht-prioritäre Arten vor.

::: notes
Prioritäre Arten: 
`r artenliste`
:::

## Prioritäre Arten
```{r}
getplot(sel)
```

## Nicht prioritäre Arten
```{r}
getplot(sel1)
```

## Spezialisten: sehr enge Biotopbindung
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Biotopbindung), copy = TRUE)
sel <- !is.na(species$Biotopbindung) & species$Biotopbindung == 3
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Ausgewählt wurden alle Arten mit sehr enger Biotopbindung (stenotope Arten) gemäss Fauna-Indicativa.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Spezialisten: sehr enge Biotopbindung
```{r}
getplot(sel)
```

## Spezialisten: relativ enge Biotopbindung
```{r}
sel <- !is.na(species$Biotopbindung) & species$Biotopbindung == 2
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Ausgewählt wurden alle Arten mit relativ enger Biotopbindung (oligotope Arten) gemäss Fauna-Indicativa.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Spezialisten: relativ enge Biotopbindung
```{r}
getplot(sel)
```

## Generalisten: breites Biotopspektrum
```{r}
sel <- !is.na(species$Biotopbindung) & species$Biotopbindung == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Ausgewählt wurden alle Arten mit einem breiten Biotopspektrum (eurytope Arten) gemäss Fauna-Indicativa.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Generalisten: breites Biotopspektrum
```{r}
getplot(sel)
```

## Feuchte Lebensräume
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Moisture), copy = TRUE)
sel <- !is.na(species$Moisture) & species$Moisture >= 6
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Zur Einteilung wurde der Indikatorwert zur Feuchtigkeit des Lebensraum, in welchem die Arten vorkommt, verwendet. Je grösser der Wert, desto feuchter der Lebensraum.
- Die Arten wurden von Stefan Birrer, Matthias Plattner und Yannick Chittaro eingestuft. Auslöser war die Umfrage bei den Europäischen Tagfalter-Experten von Chris van Swaay für die Erstellung von Zeigerwerten für Stickstoff und Feuchtigkeit.
- Als Kennarten für feuchte Lebensräume wurden alle Arten mit einem Indikatorwert von mindestens 6 verwendet.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Feuchte Lebensräume
```{r}
getplot(sel)
```

## Trockene Lebensräume
```{r}
sel <- !is.na(species$Moisture) & species$Moisture <= 3
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Zur Einteilung wurde der Indikatorwert zur Feuchtigkeit des Lebensraum, in welchem die Arten vorkommt, verwendet. Je grösser der Wert, desto feuchter der Lebensraum.
- Die Arten wurden von Stefan Birrer, Matthias Plattner und Yannick Chittaro eingestuft. Auslöser war die Umfrage bei den Europäischen Tagfalter-Experten von Chris van Swaay für die Erstellung von Zeigerwerten für Stickstoff und Feuchtigkeit.
- Als Kennarten für trockene Lebensräume wurden alle Arten mit einem Indikatorwert von höchstens 3 verwendet.
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Trockene Lebensräume
```{r}
getplot(sel)
```

## Grünland Tiefland
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Gruen_tief), copy = TRUE)
sel <- !is.na(species$Gruen_tief) & species$Gruen_tief == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Lebensraumeinteilung nach Birrer und Plattner (basierend auf Flora Indicativa).
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Grünland Tiefland
```{r}
getplot(sel)
```

## Subalpines Grünland
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Gruen_subalp), copy = TRUE)
sel <- !is.na(species$Gruen_subalp) & species$Gruen_subalp == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Lebensraumeinteilung nach Birrer und Plattner (basierend auf Flora Indicativa).
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Subalpines Grünland
```{r}
getplot(sel)
```

## Alpine Rasen, Schuttfluren
```{r}
species <- species %>% 
  left_join(tbl(db, "Traits_TF") %>% transmute(aID_SP, Alp_Rasen), copy = TRUE)
sel <- !is.na(species$Alp_Rasen) & species$Alp_Rasen == 1
artenliste <- species$ESP[sel] %>% sort %>% getlist
```

- Verwendet wurde die Lebensraumeinteilung nach Birrer und Plattner (basierend auf Flora Indicativa).
- Von diesen Arten liegen Bestandestrends für `r sum(sel)` Arten vor.

::: notes
`r artenliste`
:::

## Alpine Rasen, Schuttfluren
```{r}
getplot(sel)
```

